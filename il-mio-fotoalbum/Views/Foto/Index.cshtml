@model List<Foto>



<div>
    <input type="text" id="searchInput" name="search" value="" placeholder="Ricerca foto" />
</div>
<div class="d-flex">
    <div>
        <a href="@Url.Action("Create", "Foto")">Crea</a>
    </div>

    <div class="mx-4">
        <a href="@Url.Action("Index", "Categoria")">Vai alla sezione categorie</a>
    </div>
</div>


@foreach (var foto in Model)
{
    <div class="row MyFoto">
        <div class="col">
            <h3 class="filter-text">@foto.Titolo</h3>
        </div>
        <div class="col">
            @if (foto.Visibile)
            {
                <div class="green-dot"></div>
            }
            else
            {
                <div class="green-red"></div>
            }
        </div>
        <div class="col">
            <div><a href="@Url.Action("Show", "Foto", new { id = foto.Id })">Dettagli</a></div>
        </div>
        <div class="col">
            <div><a href="@Url.Action("Update", "Foto", new { id = foto.Id })">Modifica</a></div>
        </div>
        <div class="col">
            <form asp-controller="Foto" asp-action="Delete" asp-route-id="@foto.Id" method="post">
                @Html.AntiForgeryToken()
                <button type="submit" class="btn btn-danger btn-sm">
                    Elimina
                </button>
            </form>
        </div>
    </div>
}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('keyup', function () {
            var filter = this.value.toLowerCase();
            var foto = document.querySelectorAll('.MyFoto');

            foto.forEach(function (foto) {
                var title = foto.querySelector('.filter-text').innerText.toLowerCase();
                if (title.includes(filter)) {
                    foto.classList.remove('d-none');
                } else {
                    foto.classList.add('d-none');
                }
            });
        });
    });
</script>
